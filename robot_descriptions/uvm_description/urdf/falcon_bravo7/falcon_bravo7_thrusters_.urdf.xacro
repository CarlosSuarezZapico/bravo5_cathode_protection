<?xml version="1.0"?>
<robot name="falcon_bravo" xmlns:xacro="http://ros.org/wiki/xacro">

        <xacro:macro name="falcon_bravo" params="parent *origin  name:=falcon_bravo">   
                                <material name="${name}_green2">
                                        <color rgba="0.235 0.702 0.443 1"/>
                                </material>

                                <material name="${name}_blue">
                                        <color rgba="0.263 0.733 0.984 1"/>
                                </material>

                                <material name="${name}_lavender">
                                        <color rgba="0.5 0.733 0.984 1"/>
                                </material>

                                <material name="${name}_red">
                                        <color rgba="1 0 0 1"/>
                                </material>

                                <material name="${name}_trans_black">
                                        <color rgba="0.8 0.8 0.8 1"/>
                                </material>

                                <material name="${name}_orange">
                                        <color rgba="1 0.369 0.047 1"/>
                                </material>

                                <material name="${name}_bravo_black">
                                        <color rgba="0.3 0.3 0.3 0.7"/>
                                </material>

                                <material name="${name}_bravo_jaws_black">
                                        <color rgba="0.3 0.3 0.3 1"/>
                                </material>   
            <!--ROV-->
                    <joint name="world2base" type="fixed">
                        <parent link="world"/>
                        <child link="mobile_base"/>
                        <origin rpy="0 0 0" xyz="0 0 0"/>
                    </joint>
                    
            <link name="mobile_base">
                    <visual>
                            <geometry>
                                <mesh filename="package://uvm_description/meshes/falcon_frame.obj" scale="0.333 0.333 0.333"/>
                            </geometry>
                    </visual>
            </link>

            <link name="chassis">
                    <visual>
                            <geometry>
                                <mesh filename="package://uvm_description/meshes/chassis.STL" scale="0.001 0.001 0.001"/>
                            </geometry>
                            <material name="${name}_trans_black"/>
                    </visual>
            </link>
                    
                    <joint name="falcon2chassis" type="fixed">
                        <parent link="mobile_base"/>
                        <child link="chassis"/>
                        <origin rpy="-1.57 3.14  0" xyz="0.295 -0.73 -0.275"/>
                    </joint>
            
            <link name="floaterR">
                    <visual>
                            <geometry>
                                <mesh filename="package://uvm_description/meshes/floater.STL" scale="0.001 0.001 0.001"/>
                            </geometry>
                            <material name="${name}_orange"/>
                    </visual>
            </link>
                    <joint name="falcon2floaterR" type="fixed">
                        <parent link="mobile_base"/>
                        <child link="floaterR"/>
                        <origin rpy="-1.57 0 -1.57" xyz="0.29 0.45 0.45"/>
                    </joint>

            <link name="floaterL">
                    <visual>
                            <geometry>
                                <mesh filename="package://uvm_description/meshes/floater.STL" scale="0.001 0.001 0.001"/>
                            </geometry>
                            <material name="${name}_orange"/>
                    </visual>
            </link>
                    <joint name="falcon2floaterL" type="fixed">
                        <parent link="mobile_base"/>
                        <child link="floaterL"/>
                        <origin rpy="-1.57 0 -1.57" xyz="-0.365 0.45 0.45"/>
                    </joint>
            
            <link name="DVL">
                <visual>
                        <geometry>
                            <mesh filename="package://uvm_description/meshes/dvl_a125.stl" scale="0.001 0.001 0.001"/>
                        </geometry>
                        <material name="${name}_lavender"/>
                </visual>
            </link>
                    <joint name="falcon2dvl" type="fixed">
                        <parent link="mobile_base"/>
                        <child link="DVL"/>
                        <origin rpy="1.57 0 -1.570" xyz="0 0.17 -0.07"/>
                    </joint>
            
            <!--PROPELLERS-->
            <link name="Z_propeller">
                    <visual>
                            <geometry>
                                <mesh filename="package://uvm_description/meshes/propeller.stl" scale="0.85 0.85 0.85"/>
                            </geometry>
                            <material name="${name}_red"/>
                    </visual>
            </link>
            
            <link name="1_propeller">
                    <visual>
                            <geometry>
                                <mesh filename="package://uvm_description/meshes/propeller.stl" scale="0.85 0.85 0.85"/>
                            </geometry>
                            <material name="${name}_red"/>
                    </visual>
            </link>
            
            <link name="2_propeller">
                    <visual>
                            <geometry>
                                <mesh filename="package://uvm_description/meshes/propeller.stl" scale="0.85 0.85 0.85"/>
                            </geometry>
                            <material name="${name}_red"/>
                    </visual>
            </link>
            
            <link name="3_propeller">
                    <visual>
                            <geometry>
                                <mesh filename="package://uvm_description/meshes/propeller.stl" scale="0.85 0.85 0.85"/>
                            </geometry>
                            <material name="${name}_red"/>
                    </visual>
            </link>
            
            <link name="4_propeller">
                    <visual>
                            <geometry>
                                <mesh filename="package://uvm_description/meshes/propeller.stl" scale="0.85 0.85 0.85"/>
                            </geometry>
                            <material name="${name}_red"/>
                    </visual>
            </link>
                    
                    <joint name="z_propeller_joint" type="continuous">
                        <parent link="mobile_base"/>
                        <child link="Z_propeller"/>
                        <axis xyz="1 0 0"/>
                        <origin rpy="0.0 1.57 0" xyz="-0.005 0.015 0.35"/>
                    </joint>
                    
                    <joint name="4_propeller_joint" type="continuous">
                        <parent link="mobile_base"/>
                        <child link="4_propeller"/>
                        <axis xyz="1 0 0"/>
                        <origin rpy="0.0 0.0 -2.0944" xyz="-0.19 0.31 0.165"/>
                    </joint>
                    
                    <joint name="3_propeller_joint" type="continuous">
                        <parent link="mobile_base"/>
                        <child link="3_propeller"/>
                        <axis xyz="1 0 0"/>
                        <origin rpy="0.0 0.0 -1.0472" xyz="0.19 0.31 0.165"/>
                    </joint>
                    
                    <joint name="2_propeller_joint" type="continuous">
                        <parent link="mobile_base"/>
                        <child link="2_propeller"/>
                        <axis xyz="1 0 0"/>
                        <origin rpy="0.0 0.0 -1.0472" xyz="0.165 -0.307 0.165"/>
                    </joint>
                                        
                    <joint name="1_propeller_joint" type="continuous">
                        <parent link="mobile_base"/>
                        <child link="1_propeller"/>
                        <axis xyz="1 0 0"/>
                        <origin rpy="0.0 0.0 -2.094395327" xyz="-0.165 -0.307 0.165"/>
                    </joint>

            <!--BRAVO ARM-->                    

            <link name="link1">
                <visual>
                    <geometry>
                        <mesh filename="package://uvm_description/meshes/RS2-266.stl"/>
                    </geometry>
                    <material name="${name}_blue"/>
                </visual>
            </link>

                    <joint name="base_fixed" type="fixed">
                        <parent link="mobile_base"/>
                        <child link="link1"/>
                        <origin rpy="0 0 3.14" xyz="-0.325 -0.65 -0.09"/>
                    </joint>

            <link name="link2">
                <visual>
                    <geometry>
                        <mesh filename="package://uvm_description/meshes/RS2-217.stl"/>
                    </geometry>
                    <material name="${name}_green2"/>
                    </visual>
            </link>

                    <joint name="joint1" type="revolute">
                        <parent link="link1"/>
                        <child link="link2"/>
                        <origin rpy="0 0 0" xyz="0.0665 0 0.078"/>
                        <axis xyz="0 0 -1"/>
                        <limit effort="9.0" lower="0.0" upper="6.3" velocity="0.5"/>
                    </joint>

            <link name="link3">
                <visual>
                    <geometry>
                        <mesh filename="package://uvm_description/meshes/RS2-250-212-214.stl"/>
                    </geometry>
                    <material name="${name}_blue"/>
                </visual>
            </link>

                    <joint name="joint2" type="revolute">
                        <parent link="link2"/>
                        <child link="link3"/>
                        <origin rpy="0 0 0" xyz="-0.046 0 0.0674"/>
                        <axis xyz="0 1 0"/>
                        <limit effort="9.0" lower="0.0" upper="3.5" velocity="0.5"/>
                    </joint>

            <link name="link4">
                <visual>
                    <geometry>
                        <mesh filename="package://uvm_description/meshes/RS2-268.stl"/>
                    </geometry>
                    <material name="${name}_green2"/>
                </visual>
            </link>

                    <joint name="joint3" type="revolute">
                        <parent link="link3"/>
                        <child link="link4"/>
                        <origin rpy="0 0 0" xyz="-0.0052 0 -0.29055"/>
                        <axis xyz="0 1 0"/>
                        <limit effort="9.0" lower="0.0" upper="3.5" velocity="0.5"/>
                    </joint>

            <link name="link5">
                <visual>
                    <geometry>
                        <mesh filename="package://uvm_description/meshes/RS2-214.stl"/>
                    </geometry>
                    <material name="${name}_blue"/>
                </visual>
            </link>

                    <joint name="joint4" type="revolute">
                        <parent link="link4"/>
                        <child link="link5"/>
                        <origin rpy="0 0 0" xyz="0.0408 0 0.09695"/>
                        <axis xyz="0 0 -1"/>
                        <limit effort="9.0" lower="0.0" upper="6.3" velocity="0.5"/>
                    </joint>

            <link name="link6">
                <visual>
                    <geometry>
                        <mesh filename="package://uvm_description/meshes/RS2-161.stl"/>
                    </geometry>
                    <material name="${name}_green2"/>
                </visual>
            </link>

                    <joint name="joint5" type="revolute">
                        <parent link="link5"/>
                        <child link="link6"/>
                        <origin rpy="0 0 0" xyz="-0.0408 0 0.063"/>
                        <axis xyz="0 1 0"/>
                        <limit effort="9.0" lower="0.0" upper="3.5" velocity="0.5"/>
                    </joint>

            <link name="link7">
                <visual>
                    <geometry>
                        <mesh filename="package://uvm_description/meshes/RS2-180.stl"/>
                    </geometry>
                    <material name="${name}_blue"/>
                </visual>
            </link>

            <link name="force_torque_sensor">
                <visual>
                    <geometry>
                        <cylinder length="0.06" radius="0.04"/>
                    </geometry>
                    <material name="${name}_orange"/>
                </visual>
            </link>

            <link name="end_effector_ball">
                <visual>
                    <geometry>
                        <mesh filename="package://uvm_description/meshes/EndEffector_85mm.STL" scale="0.001 0.001 0.001"/>
                    </geometry>
                    <material name="${name}_red"/>
                </visual>
            </link>
                    <joint name="FT_fixed_1" type="fixed">
                        <origin rpy="0 0 1.57" xyz=" 0 0 -0.03"/>
                        <parent link="link7"/>
                        <child link="force_torque_sensor"/>
                    </joint>

                    <joint name="joint6" type="revolute">
                        <parent link="link6"/>
                        <child link="link7"/>
                        <origin rpy="0 3.14159 0" xyz="-0.0408 0 -0.14863"/>
                        <axis xyz="0 0 -1"/>
                        <limit effort="9.0" lower="0.0" upper="6.3" velocity="0.5"/>
                    </joint>

                    <joint name="bravo_EE_joint" type="fixed">
                        <origin rpy="0 -1.57 0" xyz=" 0.045 -0.035 0.113"/>
                        <parent link="link7"/>
                        <child link="end_effector_ball"/>
                    </joint>     

                    <joint name="contact_point_joint" type="fixed">
                        <origin rpy="0 0 0" xyz="0 0 0.24"/>
                        <parent link="force_torque_sensor"/>
                        <child link="contact_point"/>
                    </joint>

            <!-- contact_point -->
            <link name="contact_point"/>


        </xacro:macro>
</robot>



